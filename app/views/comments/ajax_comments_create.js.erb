<% if params[:video_post_id] %>
  <% id_param = params[:video_post_id] %>
<% else %>
  <% id_param = params[:post_id] %>
<% end %>

document.getElementById("comment-text-field").value = "";

var parentComment = document.getElementById("parent-comments-div");

// Create div container for comment
var comContainer = document.createElement("div");
comContainer.classList.add("post-show-split-avacom");
parentComment.insertBefore(comContainer, parentComment.firstChild);

// Create user avatar
var userAvatar = document.createElement("div");
userAvatar.classList.add("post-show-comment-avatar");
userAvatar.classList.add("background-image");

<% if current_user.avatar.attached? %> 
  userAvatar.style.backgroundImage = "url(<%= url_for(current_user.avatar) %>)";
<% else %>
  userAvatar.style.backgroundImage = "url(/assets/default_profile.jpg)";
<% end %>

comContainer.appendChild(userAvatar);

// Create div for holding comment text and like link
var comContents = document.createElement("div");
comContents.id = "post-show-comment-contents";

comContainer.appendChild(comContents);

// Create div for first row of comments text and like link
var comRow1 = document.createElement("div");
comRow1.id = "show-post-first-row-comment-div";

comContents.appendChild(comRow1);

// Create comment body
var comBody = document.createElement("p");
comBody.classList.add("show-post-comment");

comRow1.appendChild(comBody);

// Create bold tag for comment user name
var comStrong = document.createElement("strong");

comBody.appendChild(comStrong);

// Create link for comment user name
var comUsername = document.createElement("a");
comUsername.classList.add("post-show-un-link");
comUsername.href = "<%= url_for(current_user) %>";
comUsername.textContent = "<%= current_user.username + ' ' %>";

comStrong.appendChild(comUsername);

// Append comment body
var comText = document.createElement("span");
comText.textContent = "<%= params[:comment][:body] %>";

comBody.appendChild(comText);

// Create container for like and delete links
var ldDiv = document.createElement("div");
ldDiv.id = "show-post-comment-ld-div";

comRow1.appendChild(ldDiv);

// Create div for delete link
var delDiv = document.createElement("div");

ldDiv.appendChild(delDiv);

// Create Delete link
var delLink = document.createElement("a");
delLink.href = "<%= post_comment_path(@post.id, @comment.id) %>";
delLink.setAttribute("data-method", "delete");
delLink.setAttribute("data-confirm", "Are you sure?");
delLink.classList.add("comment-del-link");

delDiv.appendChild(delLink);

// Create icon
var iconDel = document.createElement("i");
iconDel.classList.add("far");
iconDel.classList.add("fa-trash-alt");
iconDel.classList.add("comment-del-link");

delLink.appendChild(iconDel);

// Create Like link
var likeLink = document.createElement("a");
likeLink.href = '<%= raw ajax_likes_update_like_path(id: @comment.id, type: "comment", html_id: "likeable_comment_id_#{@comment.id}", html_count_id: "comment_like_count#{@comment.id}") %>';

likeLink.setAttribute("data-method", "put");
likeLink.setAttribute("data-remote", "true");

ldDiv.appendChild(likeLink);

// Like icon
var likeIcon = document.createElement("i");
likeIcon.id = '<%= "likeable_comment_id_#{@comment.id}" %>';
likeIcon.classList.add("far");
likeIcon.classList.add("fa-heart");

likeLink.appendChild(likeIcon);

// Create second row div that holds date and like count
var infoDiv = document.createElement("div");
infoDiv.id = "post-show-comment-stats-div";

comContents.appendChild(infoDiv);

// Create date paragraph element
var pDate = document.createElement("p");
pDate.classList.add("post-show-comment-stats");
pDate.classList.add("p-show-time-stat");
pDate.textContent = '<%= "#{time_ago_in_words(@comment.created_at)}"  %>';

infoDiv.appendChild(pDate);

// Create Like paragraph element
var pLikes = document.createElement("p");
pLikes.id = '<%= "comment_like_count#{@comment.id}" %>';
pLikes.classList.add("post-show-comment-stats");
pLikes.classList.add("p-show-likes-stat");
pLikes.textContent = '<%= "#{@comment.likes.count} like".pluralize(@comment.likes.count) %>';

infoDiv.appendChild(pLikes);